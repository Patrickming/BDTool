# 插件模板功能使用说明

## 功能位置

模板功能位于插件侧边栏（Side Panel）中，在"清空本地数据"按钮下方。

## 前提条件

**必须先配置 Extension Token**，模板功能才会显示！

### 如何配置 Token：

1. 在网页端登录系统
2. 访问「插件内容」页面
3. 点击「激活 Token」按钮
4. 复制生成的 Token
5. 在插件中点击「配置 Token」按钮
6. 粘贴 Token 并保存

## 功能说明

### 1. 模板选择
- **搜索式选择**：输入模板名称进行实时搜索
- 选择模板后自动加载内容
- 最多显示 50 个匹配结果
- 支持模糊搜索

### 2. KOL 选择（可选）
- **搜索式选择**：输入 KOL 用户名进行实时搜索
- **默认（不选择）**：复制的内容保留占位符，如 `{{username}}`, `{{display_name}}`
- **选择 KOL**：自动替换占位符为真实 KOL 数据
- 支持输入 `@` 符号搜索
- 最多显示 50 个匹配结果

### 3. AI 改写（可选）
- **未勾选**：直接复制原始模板内容
- **勾选后**：
  - 自动显示**改写风格选择器**
  - 可选风格：
    - **专业 (Professional)**：适合商务场合，语气专业
    - **正式 (Formal)**：更加严肃正式的表达
    - **友好 (Friendly)**：友好亲切的语气
    - **轻松 (Casual)**：轻松随意的风格
  - 点击复制时会先用 GLM-4.5-airx 模型改写内容
  - 显示"⏳ AI 改写中..."
  - 改写成功后显示"✅ 已复制 AI 改写后的内容"
  - 改写过程保留变量占位符

### 4. 复制按钮
- 点击后将内容复制到剪贴板
- 显示成功提示 2 秒后自动消失

## 使用流程

```
1. 配置 Extension Token（首次使用）
   ↓
2. 模板区域自动显示
   ↓
3. 选择模板
   ↓
4. （可选）搜索并选择 KOL 替换占位符
   ↓
5. （可选）勾选 AI 改写
   ↓
6. （可选）如果启用 AI，选择改写风格
   ↓
7. 点击"复制模板内容"
   ↓
8. 粘贴到 Twitter DM 或评论
```

## 注意事项

1. **Token 必须有效**：过期的 Token 无法加载模板
2. **网络连接**：需要连接到后端 API (localhost:3000)
3. **AI 改写速度**：通常需要 1-2 秒，请耐心等待
4. **占位符保留**：AI 改写会保留所有 `{{variable}}` 格式的占位符

## 故障排除

### 看不到模板区域
- 检查是否配置了 Extension Token
- 重新加载插件

### 模板列表为空
- 确认后端服务运行正常
- 检查 Extension Token 是否有效
- 查看浏览器控制台错误信息

### AI 改写失败
- 检查网络连接
- 确认 GLM API 配置正确
- Token 可能已过期，重新激活

## 技术实现

- **前端**：Chrome Extension (Manifest V3)
- **后端**：Express + Prisma
- **认证**：Extension Token (2小时有效期)
- **AI 模型**：GLM-4.5-airx
