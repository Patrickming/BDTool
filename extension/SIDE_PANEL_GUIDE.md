# Side Panel 功能使用指南

## 什么是 Side Panel？

Side Panel（侧边栏）是 Chrome 扩展的一个新功能，可以让扩展固定在浏览器侧边栏中，**点击页面其他地方不会关闭**，非常适合需要长时间使用的工具。

## 功能特点

✅ **固定显示** - 不会因为点击页面而关闭
✅ **可调整宽度** - 可以拖动侧边栏调整宽度
✅ **与页面并排** - 可以同时查看网页和插件界面
✅ **保持状态** - 切换标签页时保持打开状态

## 如何使用

### 方法 1: 点击扩展图标（推荐）

1. 在浏览器工具栏找到 **KOL BD Tool** 扩展图标
2. 点击图标 → 自动在浏览器右侧打开侧边栏
3. 侧边栏会一直保持打开，直到你手动关闭

### 方法 2: 右键菜单

1. 右键点击扩展图标
2. 选择 **"在侧边栏中打开"**

### 方法 3: Chrome 侧边栏按钮

1. 点击浏览器地址栏右侧的 **侧边栏图标** (如果有)
2. 从列表中选择 **KOL BD Tool**

## 如何关闭侧边栏

1. 点击侧边栏右上角的 **"×"** 按钮
2. 或者再次点击浏览器地址栏右侧的侧边栏图标

## 与 Popup 的区别

| 特性 | Popup (弹窗) | Side Panel (侧边栏) |
|------|-------------|-------------------|
| 打开方式 | 点击扩展图标 | 点击扩展图标 |
| 关闭时机 | 点击其他地方自动关闭 | **不会自动关闭** ✅ |
| 宽度 | 固定宽度 | **可调整宽度** ✅ |
| 与页面关系 | 覆盖在页面上 | **与页面并排显示** ✅ |
| 切换标签页 | 自动关闭 | **保持打开** ✅ |
| 推荐场景 | 快速操作 | 长时间使用 |

## 推荐使用场景

Side Panel 特别适合以下场景：

1. **批量捕获 KOL** - 在浏览 Twitter 时长时间保持插件打开
2. **查看和编辑数据** - 一边浏览一边编辑 KOL 信息
3. **对比查看** - 左边是 Twitter，右边是插件，方便对比

## 浏览器兼容性

- ✅ **Chrome 114+** 完全支持
- ✅ **Edge 114+** 完全支持
- ❌ Firefox - 暂不支持 (使用传统 popup)
- ❌ Safari - 暂不支持 (使用传统 popup)

## 常见问题

### Q1: 为什么点击扩展图标没有弹出窗口，而是打开了侧边栏？

**A**: 这是正常的！我们已经将扩展升级为 Side Panel 模式，这样更方便使用。如果你更喜欢传统的弹窗，可以告诉我们。

### Q2: 如何调整侧边栏宽度？

**A**: 将鼠标移到侧边栏左侧边缘，会出现 **双向箭头**，拖动即可调整宽度。

### Q3: 侧边栏可以移到左侧吗？

**A**: 目前 Chrome 侧边栏只能在右侧显示，这是浏览器的限制。

### Q4: 我更喜欢传统的弹窗，怎么办？

**A**: 可以在 manifest.json 中取消注释 `"default_popup": "popup.html"` 这行，然后移除 side_panel 配置即可恢复传统弹窗模式。

### Q5: 侧边栏会影响性能吗？

**A**: 不会。侧边栏和弹窗使用相同的技术，性能完全一致。

## 技术实现

### 修改内容

1. **manifest.json**
   - 添加 `"sidePanel"` 权限
   - 配置 `side_panel.default_path`
   - 移除 `action.default_popup`（防止冲突）

2. **background.js**
   - 添加 `chrome.action.onClicked` 监听器
   - 调用 `chrome.sidePanel.open()` 打开侧边栏

3. **side_panel.html**
   - 复用现有的 popup.html 内容
   - 无需修改 JavaScript 代码

### 代码示例

```javascript
// background.js
chrome.action.onClicked.addListener((tab) => {
  chrome.sidePanel.open({ windowId: tab.windowId });
});
```

```json
// manifest.json
{
  "permissions": ["sidePanel"],
  "side_panel": {
    "default_path": "side_panel.html"
  }
}
```

## 反馈与建议

如果你有任何问题或建议，欢迎提 Issue 或联系开发团队！

---

**更新日期**: 2025-01-10
**Chrome 版本要求**: 114+
**功能状态**: ✅ 已上线
